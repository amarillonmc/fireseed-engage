【种火集结号】游戏基础逻辑与机制文档
文档版本：0.0.1
最终更新日：2025-03-06
文档作用：该文档存储了游戏的基础逻辑与机制，包括各种计算公式和游戏流程。

一、游戏初始化

1. 地图生成
   - 地图大小：默认512*512的正方形网格
   - 地图中心（256, 256）为【银白之孔】
   - 12个NPC主城按照钟表盘方向分布在地图上，距离中心的距离为地图边长的1/3
   - 地图上有25%的方格会生成NPC城池，NPC城池的等级与其数量成反比
   - 地图上有50%的方格都会是资源点，资源点中包含的单种资源产出设施最多不超过3个，包含的资源种类最多不超过4种
   - 剩余25%的方格为空白方格

2. 玩家初始化
   - 玩家加入游戏后，在地图随机地点生成玩家的第一座城池
   - 玩家城池中必定包含3个产出全部6种资源的设施
   - 玩家初始拥有1000点各种资源和1点【思考回路】
   - 玩家初始可以使用的武将COST上限为10.0

二、资源系统

1. 资源类型
   - 亮晶晶（白色）：通用资源，用于升级武将、研究科技等
   - 暖洋洋（红色）：用于训练骑士、锤子兵和侦察兵
   - 冷冰冰（蓝色）：用于训练城壁、锤子兵和侦察兵
   - 郁萌萌（绿色）：用于训练主教、锤子兵和侦察兵
   - 昼闪闪（黄色）：用于训练兵卒、锤子兵和侦察兵
   - 夜静静（黑色）：特殊资源，用于抽取技能卡
   - 思考回路：特殊资源，用于占领地图方块和扩充领地

2. 资源产出
   - 资源按照真实时间产出，默认每3秒产出1点
   - 资源产出效率可以通过升级资源产出点、研究科技、武将技能来提高
   - 思考回路每48小时产出1点，可以通过升级总督府、研究科技来提高产出效率

3. 资源贮存
   - 资源贮存初始上限为100000点
   - 可以通过建造和升级贮存所来提高资源贮存上限
   - 每个贮存所增加100000的贮存上限，且每个贮存所每一级就增加150%

三、士兵系统

1. 士兵类型
   - 普通士兵：
     - 兵卒（Pawn）：最基础的步兵，需要消耗昼闪闪资源制造
     - 骑士（Knight）：以速度见长的中阶步兵，需要消耗暖洋洋资源制造
     - 城壁（Rook）：以防御见长的中阶步兵，需要消耗冷冰冰资源制造
     - 主教（Bishop）：以攻击见长的中阶步兵，需要消耗郁萌萌资源制造
   - 特殊士兵：
     - 锤子兵（Golem）：以攻城见长的特殊步兵，需要消耗暖洋洋，冷冰冰，郁萌萌，昼闪闪四种资源制造
     - 侦察兵（Scout）：以侦察见长的特殊步兵，需要消耗暖洋洋，冷冰冰，郁萌萌，昼闪闪四种资源制造

2. 士兵属性
   - 兵卒：训练时间1秒/个，速度2秒/格，攻击力1，防御力1，对城池攻击力1
   - 骑士：训练时间5秒/个，速度1秒/格，攻击力2，防御力2，对城池攻击力2
   - 城壁：训练时间5秒/个，速度5秒/格，攻击力2，防御力4，对城池攻击力2
   - 主教：训练时间5秒/个，速度3秒/格，攻击力4，防御力2，对城池攻击力2
   - 锤子兵：训练时间30秒/个，速度30秒/格，攻击力1，防御力1，对城池攻击力10
   - 侦察兵：训练时间2秒/个，速度2秒/格，无战斗力，用于侦察

3. 士兵训练
   - 士兵在兵营中训练，锤子兵在工程所训练，侦察兵在瞭望台训练
   - 训练时间可以通过升级设施、研究科技、武将技能来减少
   - 能训练的士兵的最高等级与兵营·瞭望台·工程所的等级有关
   - 一个城池内能训练的士兵的数量与宿舍的等级与数量有关

四、武将系统

1. 武将招募
   - 玩家可以消费切糕或亮晶晶来招募武将
   - 武将有着不同的罕贵等级（B，A，S，SS，P），罕贵等级越高，属性和技能越强大
   - 武将以卡片形式抽出来，卡面上有着武将的各种信息

2. 武将属性
   - HP：武将的血量，固定为100，HP为0时不可将武将分配至城池或兵队中，HP会随着时间缓慢回复
   - 攻击力：武将的单兵攻击力
   - 守备力：武将的单兵防御力
   - 速度：武将的单兵移动速度，也会影响士兵的移动速度
   - 智力：武将的智力，会影响技能的效果/效率
   - 等级：起始为LV1，可以通过在总督府中消费亮晶晶进行升级

3. 武将技能
   - 武将自带一个技能卡牌，同时存在两个技能卡牌空位
   - 玩家可以消耗夜静静资源来抽出技能卡让武将进行装备
   - 技能分为主动技能和被动技能
   - 技能的效力与技能本身以及武将的智力相关

五、设施系统

1. 设施类型
   - 资源产出点：产出各色资源的设施，可以升级来提高产出效率
   - 总督府：玩家城池的中心建筑，有耐久值，可以升级来提高耐久值上限，且每48小时会产出1点【思考回路】
   - 兵营：为玩家城池添加消耗资源产出兵力的功能，可以升级来解锁等级更高的兵种
   - 研究所：研究科技，可以升级来解锁更高级的科技
   - 宿舍：让玩家可以存放士兵，可以升级来提升存放士兵的上限
   - 贮存所：让玩家可以存放更多的资源，可以升级来提升存放资源的上限
   - 瞭望台：提高城池防御力，可以消耗资源产出侦察兵，可以升级来提高城池防御力和侦察兵等级
   - 工程所：可以研究科技来提高城池防御力，并可以消耗资源产出锤子兵，可以升级来提高城池防御力和锤子兵等级

2. 设施建造与升级
   - 玩家可以在城池中的空地上建造设施
   - 建造和升级设施需要消耗资源和时间
   - 建造和升级时间可以通过研究科技、武将技能来减少

六、科技系统

1. 科技类型
   - 资源科技：提高资源产出效率和资源贮存上限
   - 士兵科技：提高士兵的属性和训练速度
   - 城池科技：提高城池的防御力和建造速度
   - 总督府科技：提高思考回路产出效率、武将费用上限和武将HP回复速度

2. 科技研究
   - 科技在研究所中研究
   - 研究科技需要消耗资源和时间
   - 研究时间可以通过武将技能来减少
   - 每种科技最高能研究到的等级与研究所的等级有关

七、战斗系统

1. 军队战斗力计算
   - 攻击侧：军队出发时判定（武将攻击力+对应各种兵种的攻击力*兵种等级系数*对应兵种数量）*特定技能修正 + 特定技能修正
   - 防御侧：军队到达时判定（武将防御力+对应各种兵种的防御力*兵种等级系数*对应兵种数量）*特定技能修正 + 特定技能修正
   - 攻击侧大于防御侧则攻击成功，否则攻击失败

2. 战斗结果处理
   - 攻击成功的场合，防御侧士兵全灭，攻击侧按照攻击侧和防御侧的战斗力差距百分比，按比例削减士兵数量
   - 攻击失败的场合，攻击侧士兵全灭，防御侧按照防御侧和攻击侧的战斗力差距百分比，按比例削减士兵数量
   - 只有城池中不存在其他士兵的场合，锤子兵才能对城池耐久值造成伤害

3. 军队移动速度计算
   - 军队速度 = （（军队中行动最慢的兵种的速度）* 出发点到目标的格子距离）* 技能修正值
   - 根据公式算出移动军队所使用的现实时间，以倒计时模式显示在玩家界面上
   - 攻打的是玩家的场合，该时间也会以倒计时模式，显示在被攻击的玩家界面上

八、领地系统

1. 领地扩张
   - 玩家可以攻打与自己领地邻接的方格
   - 空白方格可以直接占领，不需要使用【思考回路】
   - 资源点需要消灭其中驻扎的全部士兵，然后需要消耗【思考回路】才能占领
   - NPC城池或NPC主城需要消灭其中驻扎的全部士兵，然后再消耗掉NPC城池的全部耐久度，才能占领

2. 领地防御
   - 玩家可以在自己的领地上驻扎士兵进行防御
   - 玩家城池中可以驻扎武将和士兵进行防御
   - 城池的防御力可以通过升级总督府、瞭望台、工程所和研究科技来提高

九、PVP系统

1. 玩家攻击
   - 玩家可以攻打与自己领地邻接的其他玩家的领地和城池
   - 被攻打的玩家会在自己的界面上看到来袭方以及军队到达倒计时

2. 玩家防御
   - 玩家可以在自己的领地和城池中驻扎士兵和武将进行防御
   - 玩家可以派出军队反击攻击自己的玩家

3. 玩家结盟
   - 玩家可以与其他玩家进行结盟
   - 结盟后互相不能攻打各自的领地
   - 结盟的玩家可以通过同时出兵聚合起兵力

十、游戏胜利条件

1. 占领【银白之孔】
   - 玩家需要至少占领1个NPC主城才能攻打【银白之孔】
   - 玩家占领【银白之孔】后，需要将其持续占领30天（默认值，可配置）
   - 占领期间，其他玩家可以攻打【银白之孔】，如果攻打成功，则占领计时重置

2. 游戏结束
   - 有玩家成功占领【银白之孔】30天后，游戏结束
   - 游戏结束后，将会在48小时后进行初始化
   - 玩家持有的武将以外的数据，以及整个地图将会全部清零，重新生成

十一、游戏配置参数

1. 常量（游戏初始化时配置，游戏进行时无法修改）
   - 地图大小：默认512*512
   - 【思考回路】的产出速率：默认每48小时产出1点
   - 资源产出速率：默认每3秒产出1点
   - 资源贮存初始值：默认为100000
   - 资源贮存效率：默认每个贮存所增加100000的贮存上限，且每个贮存所每一级就增加150%
   - 兵种制造基础时间：默认兵卒1秒/个，中级兵种（骑士/城壁/主教）5秒/个，锤子兵30秒/个，侦察兵2秒/个
   - 兵种基础速度：默认兵卒与侦察兵2秒/格，骑士1秒/格，城壁5秒/格，主教3秒/格，锤子兵30秒/格
   - 兵种基础对兵攻击力：默认兵卒1，骑士2，城壁2，主教4，锤子兵1
   - 兵种基础对城池攻击力：默认兵卒1，骑士2，城壁2，主教2，锤子兵10
   - 兵种基础对兵防御力：默认兵卒1，骑士2，城壁4，主教2，锤子兵1
   - NPC城池强度：默认1级NPC城池拥有3000耐久度，每级增加1.5倍
   - NPC驻军强度：默认1级NPC城池拥有1000兵力，每级增加2.5倍
   - NPC资源点强度：默认每个资源点内每有一种资源（暖洋洋，冷冰冰，郁萌萌，昼闪闪）就拥有对应兵种（骑士，城壁，主教，兵卒）的100兵力
   - NPC强度系数：影响NPC城池强度，驻军强度与资源点强度的系数，默认为100%
   - 游戏结束判定时间：玩家占领了【数据之孔】后需要将其持续占领的时间，默认30天

2. 变量（游戏进行时可以修改）
   - 技能冷却修正倍率：默认100%
   - 兵种攻击力修正倍率：默认100%
   - 兵种防御力修正倍率：默认100%
   - 军队移动速度修正倍率：默认100%
   - 武将HP回复倍率：默认100%
   - 科技研究倍率：默认100%
   - 技能冷却倍率：默认100%

十二、游戏流程

1. 游戏开始
   - 玩家注册/登录游戏
   - 系统为玩家生成初始城池和资源
   - 玩家可以开始建设城池、训练士兵、研究科技、招募武将

2. 游戏中期
   - 玩家扩张领地，占领资源点和NPC城池
   - 玩家与其他玩家进行PVP，争夺领地和资源
   - 玩家提升自己的实力，准备攻打NPC主城

3. 游戏后期
   - 玩家占领NPC主城，准备攻打【银白之孔】
   - 玩家与其他玩家争夺【银白之孔】的控制权
   - 成功占领【银白之孔】30天的玩家获得胜利

4. 游戏结束
   - 游戏结束后，系统进行初始化
   - 玩家保留武将，其他数据清零
   - 新一轮游戏开始 